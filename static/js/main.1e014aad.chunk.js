(this.webpackJsonpanonitalks=this.webpackJsonpanonitalks||[]).push([[0],{47:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),s=n(4),u=n(15),i=n(35),l=n(1),p="[auth] Finish checking login state",m="[auth] Login",d="[auth] Logout",f="[posts] Posts loaded",b="[post] Send post",v="[post] Update post",h="[post] Delete post",g="[modal] Open modal",E="[modal] Close modal",O="[post] postId",y="[post] cleanPost",j="[form] sendForm",k={checking:!0},x=n(36),w={posts:[],post:{title:"",content:""}},C={selectedPost:{},openModal:!1,type:"create"},S={title:"",content:""},P="OPEN_MODAL",N="CLOSE_MODAL",T={posts:[{user:"Incidunt accusamus et tenetur.",title:"Ratione ea ex illo.",content:"ut",id:1},{user:"Molestiae modi sed ipsa amet aut pariatur dolorem eius velit.",title:"Corrupti ipsa consequatur esse est numquam quo.",content:"quia",id:2},{user:"Dolore voluptate assumenda nisi nobis necessitatibus qui praesentium nisi.",title:"Error dicta voluptas accusantium in.",content:"nobis",id:3},{user:"Quos facilis non.",title:"Impedit necessitatibus cum earum placeat qui et facere.",content:"voluptatem",id:4},{user:"Provident enim sint asperiores iste ut ea qui.",title:"Fugiat consequatur sunt dolore labore saepe.",content:"aut",id:5},{user:"Temporibus explicabo aliquid earum eveniet quasi omnis occaecati tenetur.",title:"Culpa repudiandae corrupti nihil illum iure fugiat.",content:"ipsam",id:6}],selectedPost:{},openModal:!1,type:"create"},L=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),{},{checking:!1},t.payload);case p:return Object(l.a)(Object(l.a)({},e),{},{checking:!1});case d:return{checking:!1};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(l.a)(Object(l.a)({},e),{},{posts:t.payload});case b:return Object(l.a)(Object(l.a)({},e.posts),{},{posts:[].concat(Object(x.a)(e.posts),[t.payload])});case h:var n=e.posts.filter((function(e){return e.id!==t.payload}));return Object(l.a)(Object(l.a)({},e),{},{posts:n});case v:return Object(l.a)({},e);case O:case y:return Object(l.a)(Object(l.a)({},e),{},{post:t.payload});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(l.a)(Object(l.a)({},e),{},{selectedPost:t.payload.content,type:t.payload.type,openModal:!0});case E:return Object(l.a)(Object(l.a)({},e),{},{selectedPost:{},type:"create",openModal:!1});default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return console.log(t),Object(l.a)(Object(l.a)({},e),{},{title:t.payload.title,content:t.payload.content});default:return e}},auxState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(l.a)(Object(l.a)({},e),{},{selectedPost:t.payload.content,type:t.payload.type,openModal:!0});case N:return Object(l.a)(Object(l.a)({},e),{},{selectedPost:{},type:"create",openModal:!1});default:return e}}}),q="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,A=Object(u.e)(L,q(Object(u.a)(i.a))),D=n(13),I=n(3),M=n(5),_=n.n(M),F=n(11),R="https://mern-anonitalks.herokuapp.com/api",G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(R,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(R,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},U=n(7),z=n.n(U),B=function(){return{type:p}},X=function(e){return{type:m,payload:e}},H=function(){return{type:d}},Q=n(22),V=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Q.a)(e,["isAuthenticated","component"]);return r.a.createElement(I.b,Object.assign({},a,{component:function(e){return t?r.a.createElement(I.a,{to:"/"}):r.a.createElement(n,e)}}))},K=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Q.a)(e,["isAuthenticated","component"]);return r.a.createElement(I.b,Object.assign({},a,{component:function(e){return t?r.a.createElement(n,e):r.a.createElement(I.a,{to:"/login"})}}))},W=n(14),Y=n(16),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(W.a)(t,2),r=n[0],o=n[1],c=function(){o(e)},s=function(e){var t=e.target;console.log(t),o(Object(l.a)(Object(l.a)({},r),{},Object(Y.a)({},t.name,t.value))),console.log(r)};return[r,s,c]},$=function(){var e=Object(s.b)();return r.a.createElement("div",null,r.a.createElement("h1",null,"Navbar"),r.a.createElement("button",{onClick:function(){e((function(e){localStorage.clear(),e(H())}))}},"Logout"))},ee=function(e){var t=e.type,n=void 0===t?"create":t,a=e.content;return{type:g,payload:{type:n,content:void 0===a?{title:"",content:""}:a}}},te=function(){return{type:E}},ne=function(){return function(){var e=Object(F.a)(_.a.mark((function e(t){var n,a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("posts");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=a.posts,e.abrupt("return",t({type:f,payload:r}));case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ae=function(){return{type:y,payload:{title:"",content:""}}},re=function(e){var t=e.user,n=e.title,a=e.content,o=e.id,c=Object(s.b)();return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){c(function(e){return function(){var t=Object(F.a)(_.a.mark((function t(n){var a,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J("posts/".concat(e),{},"DELETE");case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).ok?(n({type:h,payload:e}),z.a.fire("Listo!","Post Borrado!","success"),n(ne())):z.a.fire("Error",r.msg,"error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(o))}},"Eliminar"),r.a.createElement("button",{onClick:function(){c(ee({type:"update",content:{id:o,title:n,content:a}}))}},"Actualizar"),r.a.createElement("h3",null,t),r.a.createElement("span",null,n),r.a.createElement("p",null,a))};re.defaultProps={user:"User",title:"Title",content:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Facere animi porro hic quaerat, doloribus possimus fugit sunt ex obcaecati dolores, quidem veritatis repellendus velit dolor! Ea tempora asperiores consectetur nulla!"};n(47);var oe=n(28),ce=n.n(oe),se=function(e){var t=e.title,n=e.content,o=e.id,c=void 0===o?"":o,u=e.type,i=Object(s.b)(),p=Object(a.useState)({title:"",content:"",id:""}),m=Object(W.a)(p,2),d=m[0],f=m[1];Object(a.useEffect)((function(){f(Object(l.a)(Object(l.a)({},d),{},{title:t,content:n,id:c}))}),[]);var h=function(e){var t=e.target;f(Object(l.a)(Object(l.a)({},d),{},Object(Y.a)({},t.name,t.value)))},g=function(e){var t;e.preventDefault(),"create"===u?i((t=d,function(){var e=Object(F.a)(_.a.mark((function e(n){var a,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J("posts",{title:t.title,content:t.content},"POST");case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,o=r.post,r.ok?(n({type:b,payload:o}),z.a.fire("Listo!","Post Agregado!","success"),n(te()),n(ne())):(z.a.fire("Error",r.errors.title.msg,"error"),z.a.fire("Error",r.errors.content.msg,"error")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())):"update"===u&&i(function(e){return function(){var t=Object(F.a)(_.a.mark((function t(n,a){var r,o,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J("posts/".concat(e.id),{title:e.title,content:e.content,id:e.id},"PUT");case 3:return r=t.sent,t.next=6,r.json();case 6:o=t.sent,c={title:e.title,content:e.content,id:e.id},o.ok?(n({type:v,payload:c}),z.a.fire("Listo!","Post Actualizado!","success"),n(te()),n(ne()),ae()):(z.a.fire("Error",o.msg,"error"),z.a.fire("Error",o.msg,"error")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(d))};return r.a.createElement("form",{onSubmit:function(e){return g(e)},className:"container"},r.a.createElement("input",{className:"inTitle",placeholder:"T\xedtulo del post",type:"text",name:"title",autoComplete:"off",value:d.title,onChange:function(e){return h(e)}}),r.a.createElement("br",null),r.a.createElement("textarea",{type:"text",className:"text-content",placeholder:"Escribe tu post aqui.",name:"content",autoComplete:"off",value:d.content,onChange:function(e){return h(e)}}),r.a.createElement("input",{type:"submit",className:"mgy center",value:"create"===u?"Postear":"Actualizar"}))};ce.a.setAppElement("#root");var ue=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.modal})),n=t.openModal,a=t.type,o=t.selectedPost,c=function(){return e(te())};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{isOpen:n,onRequestClose:c,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},"create"===a?r.a.createElement(se,{title:o.title,content:o.content,type:"create"}):r.a.createElement(se,{title:o.title,content:o.content,id:o.id,type:"update"}),r.a.createElement("button",{onClick:c},"Cerrar modal")))},ie=[{layout:"inicio-sesion",hasLogged:!1,routes:[{exact:!0,path:"/login",component:function(){var e=Object(s.b)(),t=Z({lemail:"jorge@gmail.com",lpassword:"123456"}),n=Object(W.a)(t,2),a=n[0],o=n[1],c=a.lemail,u=a.lpassword;return r.a.createElement("div",null,r.a.createElement("h1",null,"LoginScreen"),r.a.createElement("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=c,a=u,function(){var e=Object(F.a)(_.a.mark((function e(t){var r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("auth",{email:n,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(o=e.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:o.uid,name:o.name}))):z.a.fire("Error",o.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("input",{className:"",type:"text",placeholder:"Email",name:"lemail",autoComplete:"off",value:c,onChange:o}),r.a.createElement("input",{className:"",type:"text",placeholder:"Password",name:"lpassword",autoComplete:"off",value:u,onChange:o}),r.a.createElement("input",{type:"submit",className:"",value:"Entrar"}),r.a.createElement(D.b,{to:"/signup"},"Sign up")))}},{exact:!0,path:"/signup",component:function(){var e=Object(s.b)(),t=Z({rname:"jorge",remail:"jorge@gmail.com",rpassword1:"123456",rpassword2:"123456"}),n=Object(W.a)(t,2),a=n[0],o=n[1],c=a.rname,u=a.remail,i=a.rpassword1,l=a.rpassword2;return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),i!==l)return z.a.fire("Error","Las contrase\xf1as deben ser iguales","error");var n,a,r;e((n=c,a=u,r=i,function(){var e=Object(F.a)(_.a.mark((function e(t){var o,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("auth/new",{name:n,email:a,password:r},"POST");case 2:return o=e.sent,e.next=5,o.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:c.uid,name:c.name}))):z.a.fire("Error",c.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("input",{type:"text",placeholder:"Name",name:"rname",className:"",autoComplete:"off",value:c,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"remail",className:"",autoComplete:"off",value:u,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Password",name:"rpassword1",className:"",autoComplete:"off",value:i,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Confirm password",name:"rpassword2",className:"",autoComplete:"off",value:l,onChange:o}),r.a.createElement("input",{type:"submit",className:"",value:"Register"})),r.a.createElement(D.b,{to:"/login"},"Login"))}}]},{layout:"app",hasLogged:!0,routes:[{exact:!0,path:"/",component:function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.posts})).posts;Object(a.useEffect)((function(){e(ne())}),[e]);return r.a.createElement("div",null,r.a.createElement("h1",null,"HomeScreen"),r.a.createElement($,null),r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){return e(ee({}))}},"Agregar post"),r.a.createElement("center",null,t.map((function(e){return r.a.createElement(re,Object.assign({key:e.id},e,{user:e.user.name}))}))),r.a.createElement(ue,null))}}]}],le=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,o=t.uid;return Object(a.useEffect)((function(){e(function(){var e=Object(F.a)(_.a.mark((function e(t){var n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:a.uid,name:a.name}))):t(B());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?r.a.createElement("h5",null,"Espere..."):r.a.createElement(D.a,null,r.a.createElement("div",null,r.a.createElement(I.d,null,ie.map((function(e){var t=e.hasLogged?K:V;return e.routes.map((function(e){return r.a.createElement(t,{key:e.path,path:e.path,exact:e.exact,isAuthenticated:!!o,component:e.component})}))})),r.a.createElement(I.a,{to:"/login"}))))},pe=(n(57),function(){return r.a.createElement(s.a,{store:A},r.a.createElement(le,null))});c.a.render(r.a.createElement(pe,null),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.1e014aad.chunk.js.map