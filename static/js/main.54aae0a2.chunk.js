(this.webpackJsonpanonitalks=this.webpackJsonpanonitalks||[]).push([[0],{73:function(t,e,n){},74:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n(0),c=n(26),o=n.n(c),s=n(6),i=n(21),u=n(45),l=n(4),p="[auth] Finish checking login state",j="[auth] Login",d="[auth] Logout",b="[posts] Posts loaded",f="[post] Send post",O="[post] Update post",h="[post] Delete post",m="[modal] Open modal",x="[modal] Close modal",v="[post] postId",g="[post] cleanPost",y="[form] sendForm",k={checking:!0},w=n(24),E=n(46),C=n.n(E),S=function(t,e){var n=C.a.findIndex(t.posts,{id:e.id});return t.posts.splice(n,1,e)},N={posts:[],post:{id:"",title:"",content:""}},P={selectedPost:{},openModal:!1,type:"create"},T={title:"",content:""},L=Object(i.c)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(l.a)(Object(l.a)({},t),{},{checking:!1},e.payload);case p:return Object(l.a)(Object(l.a)({},t),{},{checking:!1});case d:return{checking:!1};default:return t}},posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object(l.a)(Object(l.a)({},t),{},{posts:e.payload});case f:return Object(l.a)(Object(l.a)({},t.posts),{},{posts:[].concat(Object(w.a)(t.posts),[e.payload])});case h:var n=t.posts.filter((function(t){t.id,e.payload}));return Object(l.a)(Object(l.a)({},t),{},{posts:n});case O:return Object(l.a)(Object(l.a)({},t),{},{posts:S(t,e.payload)});case v:case g:return Object(l.a)(Object(l.a)({},t),{},{post:e.payload});default:return t}},modal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return Object(l.a)(Object(l.a)({},t),{},{selectedPost:e.payload.content,type:e.payload.type,openModal:!0});case x:return Object(l.a)(Object(l.a)({},t),{},{selectedPost:{},type:"create",openModal:!1});default:return t}},form:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(l.a)(Object(l.a)({},t),{},{title:e.payload.title,content:e.payload.content});default:return t}}}),A="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,I=Object(i.e)(L,A(Object(i.a)(u.a))),D=n(19),_=n(5),M=n(11),z=n.n(M),G=n(18),J=n(10),R=n.n(J),U="https://mern-anonitalks.herokuapp.com/api",F=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(U,"/").concat(t);return"GET"===n?fetch(r):fetch(r,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(e)})},q=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(U,"/").concat(t),a=localStorage.getItem("token")||"";return"GET"===n?fetch(r,{method:n,headers:{"x-token":a}}):fetch(r,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(e)})},B=function(){return{type:p}},X=function(t){return{type:j,payload:t}},H=function(){return{type:d}},V=n(32),K=function(t){var e=t.isAuthenticated,n=t.component,a=Object(V.a)(t,["isAuthenticated","component"]);return Object(r.jsx)(_.b,Object(l.a)(Object(l.a)({},a),{},{component:function(t){return e?Object(r.jsx)(_.a,{to:"/"}):Object(r.jsx)(n,Object(l.a)({},t))}}))},Q=function(t){var e=t.isAuthenticated,n=t.component,a=Object(V.a)(t,["isAuthenticated","component"]);return Object(r.jsx)(_.b,Object(l.a)(Object(l.a)({},a),{},{component:function(t){return e?Object(r.jsx)(n,Object(l.a)({},t)):Object(r.jsx)(_.a,{to:"/login"})}}))},W=n(9),Y=n(16),Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(a.useState)(t),n=Object(W.a)(e,2),r=n[0],c=n[1],o=function(){c(t)},s=function(t){var e=t.target;c(Object(l.a)(Object(l.a)({},r),{},Object(Y.a)({},e.name,e.value)))};return[r,s,o]},$=function(){var t=Object(s.b)();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Navbar"}),Object(r.jsx)("button",{type:"button",onClick:function(){t((function(t){localStorage.clear(),t(H())}))},children:"Logout"})]})},tt=function(t){var e=t.type,n=void 0===e?"create":e,r=t.content;return{type:m,payload:{type:n,content:void 0===r?{title:"",content:""}:r}}},et=function(){return{type:x}},nt=function(){return function(){var t=Object(G.a)(z.a.mark((function t(e){var n,r,a;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q("posts");case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,a=r.posts,t.abrupt("return",e({type:b,payload:a}));case 11:t.prev=11,t.t0=t.catch(0),R.a.fire("Error",t.t0,"error");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},rt=function(t){var e=t.user,n=t.title,a=t.content,c=t.id,o=Object(s.b)();return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{type:"button",onClick:function(){o(function(t){return function(){var e=Object(G.a)(z.a.mark((function e(n){var r,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("posts/".concat(t),{},"DELETE");case 3:return r=e.sent,e.next=6,r.json();case 6:(a=e.sent).ok?(n({type:h,payload:t}),R.a.fire("Listo!","Post Borrado!","success"),n(nt())):R.a.fire("Error",a.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),R.a.fire("Error",e.t0,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}(c))},children:"Eliminar"}),Object(r.jsx)("button",{type:"button",onClick:function(){o(tt({type:"update",content:{id:c,title:n,content:a}}))},children:"Actualizar"}),Object(r.jsx)("h3",{children:e}),Object(r.jsx)("span",{children:n}),Object(r.jsx)("p",{children:a})]})};rt.defaultProps={user:"User",title:"Title",content:"content"};var at=n(39),ct=n.n(at),ot=n(47),st=n.n(ot),it=n(91),ut=function(t){var e=t.title,n=t.content,c=t.id,o=void 0===c?"":c,i=t.type,u=Object(s.b)(),p=Object(a.useState)({title:"",content:"",id:""}),j=Object(W.a)(p,2),d=j[0],b=j[1];Object(a.useEffect)((function(){b(Object(l.a)(Object(l.a)({},d),{},{title:e,content:n,id:o}))}),[]);var h=function(t){var e=t.target;b(Object(l.a)(Object(l.a)({},d),{},Object(Y.a)({},e.name,e.value)))},m=function(t){t.preventDefault(),"create"===i?u(function(t){var e=t.title,n=t.content;return function(){var t=Object(G.a)(z.a.mark((function t(r){var a,c,o;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q("posts",{title:e,content:n},"POST");case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,o=c.post,c.ok?(r({type:f,payload:o}),R.a.fire("Listo!","Post Agregado!","success"),r(et()),r(nt())):(R.a.fire("Error",c.errors.title.msg,"error"),R.a.fire("Error",c.errors.content.msg,"error")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),R.a.fire("Error",t.t0,"error");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(d)):"update"===i&&u(function(t){var e=t.title,n=t.content,r=t.id;return function(){var t=Object(G.a)(z.a.mark((function t(a){var c,o,s;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q("posts/".concat(r),{title:e,content:n,id:r},"PUT");case 3:return c=t.sent,t.next=6,c.json();case 6:o=t.sent,s={title:e,content:n,id:r},o.ok?(a({type:O,payload:s}),R.a.fire("Listo!","Post Actualizado!","success"),a(et()),a(nt())):R.a.fire("Error",o.msg,"error"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),R.a.fire("Error",t.t0,"error");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(d))};return Object(r.jsxs)("form",{onSubmit:function(t){return m(t)},className:"container",children:[Object(r.jsx)("input",{className:"inTitle",placeholder:"T\xedtulo del post",type:"text",name:"title",autoComplete:"off",value:d.title,onChange:function(t){return h(t)}}),Object(r.jsx)("br",{}),Object(r.jsx)("textarea",{type:"text",className:"text-content",placeholder:"Escribe tu post aqui.",name:"content",autoComplete:"off",value:d.content,onChange:function(t){return h(t)}}),Object(r.jsx)("input",{type:"submit",className:"mgy center pointer",value:"create"===i?"Postear":"Actualizar"})]})};ct.a.setAppElement("#root");var lt=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.modal})),n=e.openModal,a=e.type,c=e.selectedPost,o=function(){return t(et())};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(ct.a,{isOpen:n,onRequestClose:o,closeTimeoutMS:200,className:"modal text-right",overlayClassName:"modal-fondo",children:[Object(r.jsx)(it.a,{"aria-label":"delete",onClick:o,children:Object(r.jsx)(st.a,{fontSize:"small"})}),"create"===a?Object(r.jsx)(ut,{title:c.title,content:c.content,type:"create"}):Object(r.jsx)(ut,{title:c.title,content:c.content,id:c.id,type:"update"})]})})},pt=[{layout:"inicio-sesion",hasLogged:!1,routes:[{exact:!0,path:"/login",component:function(){var t=Object(s.b)(),e=Z({lemail:"jorge@gmail.com",lpassword:"123456"}),n=Object(W.a)(e,2),a=n[0],c=n[1],o=a.lemail,i=a.lpassword;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"LoginScreen"}),Object(r.jsxs)("form",{onSubmit:function(e){var n,r;e.preventDefault(),t((n=o,r=i,function(){var t=Object(G.a)(z.a.mark((function t(e){var a,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F("auth",{email:n,password:r},"POST");case 2:return a=t.sent,t.next=5,a.json();case 5:(c=t.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),e(X({uid:c.uid,name:c.name}))):R.a.fire("Error",c.msg,"error");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:[Object(r.jsx)("input",{className:"",type:"text",placeholder:"Email",name:"lemail",autoComplete:"off",value:o,onChange:c}),Object(r.jsx)("input",{className:"",type:"text",placeholder:"Password",name:"lpassword",autoComplete:"off",value:i,onChange:c}),Object(r.jsx)("input",{type:"submit",className:"",value:"Entrar"}),Object(r.jsx)(D.b,{to:"/signup",children:"Sign up"})]})]})}},{exact:!0,path:"/signup",component:function(){var t=Object(s.b)(),e=Z({rname:"jorge",remail:"jorge@gmail.com",rpassword1:"123456",rpassword2:"123456"}),n=Object(W.a)(e,2),a=n[0],c=n[1],o=a.rname,i=a.remail,u=a.rpassword1,l=a.rpassword2;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Register"}),Object(r.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),u!==l)return R.a.fire("Error","Las contrase\xf1as deben ser iguales","error");var n,r,a;t((n=o,r=i,a=u,function(){var t=Object(G.a)(z.a.mark((function t(e){var c,o;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F("auth/new",{name:n,email:r,password:a},"POST");case 2:return c=t.sent,t.next=5,c.json();case 5:(o=t.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),e(X({uid:o.uid,name:o.name}))):R.a.fire("Error",o.msg,"error");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:[Object(r.jsx)("input",{type:"text",placeholder:"Name",name:"rname",className:"",autoComplete:"off",value:o,onChange:c}),Object(r.jsx)("input",{type:"text",placeholder:"Email",name:"remail",className:"",autoComplete:"off",value:i,onChange:c}),Object(r.jsx)("input",{type:"text",placeholder:"Password",name:"rpassword1",className:"",autoComplete:"off",value:u,onChange:c}),Object(r.jsx)("input",{type:"text",placeholder:"Confirm password",name:"rpassword2",className:"",autoComplete:"off",value:l,onChange:c}),Object(r.jsx)("input",{type:"submit",className:"",value:"Register"})]}),Object(r.jsx)(D.b,{to:"/login",children:"Login"})]})}}]},{layout:"app",hasLogged:!0,routes:[{exact:!0,path:"/",component:function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.posts})).posts;Object(a.useEffect)((function(){t(nt())}),[t]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"HomeScreen"}),Object(r.jsx)($,{}),Object(r.jsx)("hr",{}),Object(r.jsx)("button",{onClick:function(){return t(tt({}))},children:"Agregar post"}),Object(r.jsx)("center",{children:e.map((function(t){return Object(r.jsx)(rt,Object(l.a)(Object(l.a)({},t),{},{user:t.user.name}),t.id)}))}),Object(r.jsx)(lt,{})]})}}]}],jt=function(){var t=Object(s.b)(),e=Object(s.c)((function(t){return t.auth})),n=e.checking,c=e.uid;return Object(a.useEffect)((function(){t(function(){var t=Object(G.a)(z.a.mark((function t(e){var n,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q("auth/renew");case 2:return n=t.sent,t.next=5,n.json();case 5:(r=t.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),e(X({uid:r.uid,name:r.name}))):e(B());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]),n?Object(r.jsx)("h5",{children:"Espere..."}):Object(r.jsx)(D.a,{children:Object(r.jsx)("div",{children:Object(r.jsxs)(_.d,{children:[pt.map((function(t){var e=t.hasLogged?Q:K;return t.routes.map((function(t){return Object(r.jsx)(e,{path:t.path,exact:t.exact,isAuthenticated:!!c,component:t.component},t.path)}))})),Object(r.jsx)(_.a,{to:"/login"})]})})})},dt=(n(73),function(){return Object(r.jsx)(s.a,{store:I,children:Object(r.jsx)(jt,{})})});o.a.render(Object(r.jsx)(dt,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.54aae0a2.chunk.js.map