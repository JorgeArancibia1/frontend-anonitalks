(this.webpackJsonpanonitalks=this.webpackJsonpanonitalks||[]).push([[0],{49:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),l=n(4),s=n(15),u=n(35),i=n(1),p="[auth] Finish checking login state",m="[auth] Login",d="[auth] Logout",f="[posts] Posts loaded",b="[post] Send post",h="[post] Update post",v="[post] Delete post",g="[modal] Open modal",E="[modal] Close modal",j="[post] postId",O="[post] cleanPost",y="[form] sendForm",k={checking:!0},w=n(37),x=n(36),C=n.n(x),S=function(e,t){var n=C.a.findIndex(e.posts,{id:t.id});return e.posts.splice(n,1,t)},N={posts:[],post:{id:"",title:"",content:""}},P={selectedPost:{},openModal:!1,type:"create"},T={title:"",content:""},L=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(i.a)(Object(i.a)({},e),{},{checking:!1},t.payload);case p:return Object(i.a)(Object(i.a)({},e),{},{checking:!1});case d:return{checking:!1};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(i.a)(Object(i.a)({},e),{},{posts:t.payload});case b:return Object(i.a)(Object(i.a)({},e.posts),{},{posts:[].concat(Object(w.a)(e.posts),[t.payload])});case v:var n=e.posts.filter((function(e){return e.id!==t.payload}));return Object(i.a)(Object(i.a)({},e),{},{posts:n});case h:return Object(i.a)(Object(i.a)({},e),{},{posts:S(e,t.payload)});case j:case O:return Object(i.a)(Object(i.a)({},e),{},{post:t.payload});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(i.a)(Object(i.a)({},e),{},{selectedPost:t.payload.content,type:t.payload.type,openModal:!0});case E:return Object(i.a)(Object(i.a)({},e),{},{selectedPost:{},type:"create",openModal:!1});default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return console.log(t),Object(i.a)(Object(i.a)({},e),{},{title:t.payload.title,content:t.payload.content});default:return e}}}),A="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,I=Object(s.e)(L,A(Object(s.a)(u.a))),D=n(13),_=n(3),M=n(5),q=n.n(M),F=n(11),G="https://mern-anonitalks.herokuapp.com/api",J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(G,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(G,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},U=n(7),z=n.n(U),B=function(){return{type:p}},X=function(e){return{type:m,payload:e}},H=function(){return{type:d}},V=n(22),K=function(e){var t=e.isAuthenticated,n=e.component,a=Object(V.a)(e,["isAuthenticated","component"]);return r.a.createElement(_.b,Object.assign({},a,{component:function(e){return t?r.a.createElement(_.a,{to:"/"}):r.a.createElement(n,e)}}))},Q=function(e){var t=e.isAuthenticated,n=e.component,a=Object(V.a)(e,["isAuthenticated","component"]);return r.a.createElement(_.b,Object.assign({},a,{component:function(e){return t?r.a.createElement(n,e):r.a.createElement(_.a,{to:"/login"})}}))},W=n(14),Y=n(16),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(W.a)(t,2),r=n[0],o=n[1],c=function(){o(e)},l=function(e){var t=e.target;console.log(t),o(Object(i.a)(Object(i.a)({},r),{},Object(Y.a)({},t.name,t.value))),console.log(r)};return[r,l,c]},$=function(){var e=Object(l.b)();return r.a.createElement("div",null,r.a.createElement("h1",null,"Navbar"),r.a.createElement("button",{onClick:function(){e((function(e){localStorage.clear(),e(H())}))}},"Logout"))},ee=function(e){var t=e.type,n=void 0===t?"create":t,a=e.content;return{type:g,payload:{type:n,content:void 0===a?{title:"",content:""}:a}}},te=function(){return{type:E}},ne=function(){return function(){var e=Object(F.a)(q.a.mark((function e(t){var n,a,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R("posts");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=a.posts,e.abrupt("return",t({type:f,payload:r}));case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ae=function(e){var t=e.user,n=e.title,a=e.content,o=e.id,c=Object(l.b)();return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){c(function(e){return function(){var t=Object(F.a)(q.a.mark((function t(n){var a,r;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R("posts/".concat(e),{},"DELETE");case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).ok?(n({type:v,payload:e}),z.a.fire("Listo!","Post Borrado!","success"),n(ne())):z.a.fire("Error",r.msg,"error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(o))}},"Eliminar"),r.a.createElement("button",{onClick:function(){c(ee({type:"update",content:{id:o,title:n,content:a}}))}},"Actualizar"),r.a.createElement("h3",null,t),r.a.createElement("span",null,n),r.a.createElement("p",null,a))};ae.defaultProps={user:"User",title:"Title",content:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Facere animi porro hic quaerat, doloribus possimus fugit sunt ex obcaecati dolores, quidem veritatis repellendus velit dolor! Ea tempora asperiores consectetur nulla!"};n(49);var re=n(29),oe=n.n(re),ce=function(e){var t=e.title,n=e.content,o=e.id,c=void 0===o?"":o,s=e.type,u=Object(l.b)(),p=Object(a.useState)({title:"",content:"",id:""}),m=Object(W.a)(p,2),d=m[0],f=m[1];Object(a.useEffect)((function(){f(Object(i.a)(Object(i.a)({},d),{},{title:t,content:n,id:c}))}),[]);var v=function(e){var t=e.target;f(Object(i.a)(Object(i.a)({},d),{},Object(Y.a)({},t.name,t.value)))},g=function(e){e.preventDefault(),"create"===s?u(function(e){var t=e.title,n=e.content;return function(){var e=Object(F.a)(q.a.mark((function e(a){var r,o,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R("posts",{title:t,content:n},"POST");case 3:return r=e.sent,e.next=6,r.json();case 6:o=e.sent,c=o.post,o.ok?(a({type:b,payload:c}),z.a.fire("Listo!","Post Agregado!","success"),a(te()),a(ne())):(z.a.fire("Error",o.errors.title.msg,"error"),z.a.fire("Error",o.errors.content.msg,"error")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(d)):"update"===s&&u(function(e){var t=e.title,n=e.content,a=e.id;return function(){var e=Object(F.a)(q.a.mark((function e(r){var o,c,l;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R("posts/".concat(a),{title:t,content:n,id:a},"PUT");case 3:return o=e.sent,e.next=6,o.json();case 6:c=e.sent,l={title:t,content:n,id:a},c.ok?(r({type:h,payload:l}),z.a.fire("Listo!","Post Actualizado!","success"),r(te()),r(ne())):z.a.fire("Error",c.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(d))};return r.a.createElement("form",{onSubmit:function(e){return g(e)},className:"container"},r.a.createElement("input",{className:"inTitle",placeholder:"T\xedtulo del post",type:"text",name:"title",autoComplete:"off",value:d.title,onChange:function(e){return v(e)}}),r.a.createElement("br",null),r.a.createElement("textarea",{type:"text",className:"text-content",placeholder:"Escribe tu post aqui.",name:"content",autoComplete:"off",value:d.content,onChange:function(e){return v(e)}}),r.a.createElement("input",{type:"submit",className:"mgy center",value:"create"===s?"Postear":"Actualizar"}))};oe.a.setAppElement("#root");var le=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.modal})),n=t.openModal,a=t.type,o=t.selectedPost,c=function(){return e(te())};return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{isOpen:n,onRequestClose:c,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},"create"===a?r.a.createElement(ce,{title:o.title,content:o.content,type:"create"}):r.a.createElement(ce,{title:o.title,content:o.content,id:o.id,type:"update"}),r.a.createElement("button",{onClick:c},"Cerrar modal")))},se=[{layout:"inicio-sesion",hasLogged:!1,routes:[{exact:!0,path:"/login",component:function(){var e=Object(l.b)(),t=Z({lemail:"jorge@gmail.com",lpassword:"123456"}),n=Object(W.a)(t,2),a=n[0],o=n[1],c=a.lemail,s=a.lpassword;return r.a.createElement("div",null,r.a.createElement("h1",null,"LoginScreen"),r.a.createElement("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=c,a=s,function(){var e=Object(F.a)(q.a.mark((function e(t){var r,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("auth",{email:n,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(o=e.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:o.uid,name:o.name}))):z.a.fire("Error",o.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("input",{className:"",type:"text",placeholder:"Email",name:"lemail",autoComplete:"off",value:c,onChange:o}),r.a.createElement("input",{className:"",type:"text",placeholder:"Password",name:"lpassword",autoComplete:"off",value:s,onChange:o}),r.a.createElement("input",{type:"submit",className:"",value:"Entrar"}),r.a.createElement(D.b,{to:"/signup"},"Sign up")))}},{exact:!0,path:"/signup",component:function(){var e=Object(l.b)(),t=Z({rname:"jorge",remail:"jorge@gmail.com",rpassword1:"123456",rpassword2:"123456"}),n=Object(W.a)(t,2),a=n[0],o=n[1],c=a.rname,s=a.remail,u=a.rpassword1,i=a.rpassword2;return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),u!==i)return z.a.fire("Error","Las contrase\xf1as deben ser iguales","error");var n,a,r;e((n=c,a=s,r=u,function(){var e=Object(F.a)(q.a.mark((function e(t){var o,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J("auth/new",{name:n,email:a,password:r},"POST");case 2:return o=e.sent,e.next=5,o.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:c.uid,name:c.name}))):z.a.fire("Error",c.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement("input",{type:"text",placeholder:"Name",name:"rname",className:"",autoComplete:"off",value:c,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"remail",className:"",autoComplete:"off",value:s,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Password",name:"rpassword1",className:"",autoComplete:"off",value:u,onChange:o}),r.a.createElement("input",{type:"text",placeholder:"Confirm password",name:"rpassword2",className:"",autoComplete:"off",value:i,onChange:o}),r.a.createElement("input",{type:"submit",className:"",value:"Register"})),r.a.createElement(D.b,{to:"/login"},"Login"))}}]},{layout:"app",hasLogged:!0,routes:[{exact:!0,path:"/",component:function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.posts})).posts;Object(a.useEffect)((function(){e(ne())}),[e]);return r.a.createElement("div",null,r.a.createElement("h1",null,"HomeScreen"),r.a.createElement($,null),r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){return e(ee({}))}},"Agregar post"),r.a.createElement("center",null,t.map((function(e){return r.a.createElement(ae,Object.assign({key:e.id},e,{user:e.user.name}))}))),r.a.createElement(le,null))}}]}],ue=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth})),n=t.checking,o=t.uid;return Object(a.useEffect)((function(){e(function(){var e=Object(F.a)(q.a.mark((function e(t){var n,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:a.uid,name:a.name}))):t(B());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?r.a.createElement("h5",null,"Espere..."):r.a.createElement(D.a,null,r.a.createElement("div",null,r.a.createElement(_.d,null,se.map((function(e){var t=e.hasLogged?Q:K;return e.routes.map((function(e){return r.a.createElement(t,{key:e.path,path:e.path,exact:e.exact,isAuthenticated:!!o,component:e.component})}))})),r.a.createElement(_.a,{to:"/login"}))))},ie=(n(59),function(){return r.a.createElement(l.a,{store:I},r.a.createElement(ue,null))});c.a.render(r.a.createElement(ie,null),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.f98a8d17.chunk.js.map