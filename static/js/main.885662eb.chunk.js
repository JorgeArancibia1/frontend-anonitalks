(this.webpackJsonpanonitalks=this.webpackJsonpanonitalks||[]).push([[0],{73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n(26),o=n.n(c),s=n(6),i=n(21),u=n(45),l=n(4),p="[auth] Finish checking login state",j="[auth] Login",d="[auth] Logout",b="[posts] Posts loaded",m="[post] Send post",f="[post] Update post",O="[post] Delete post",h="[modal] Open modal",x="[modal] Close modal",v="[post] postId",g="[post] cleanPost",y="[form] sendForm",k={checking:!0},w=n(24),E=n(46),N=n.n(E),C=function(e,t){var n=N.a.findIndex(e.posts,{id:t.id});return e.posts.splice(n,1,t)},S={posts:[],post:{id:"",title:"",content:""}},_={selectedPost:{},openModal:!1,type:"create"},P={title:"",content:""},T=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(l.a)(Object(l.a)({},e),{},{checking:!1},t.payload);case p:return Object(l.a)(Object(l.a)({},e),{},{checking:!1});case d:return{checking:!1};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(l.a)(Object(l.a)({},e),{},{posts:t.payload});case m:return Object(l.a)(Object(l.a)({},e.posts),{},{posts:[].concat(Object(w.a)(e.posts),[t.payload])});case O:var n=e.posts.filter((function(e){e.id,t.payload}));return Object(l.a)(Object(l.a)({},e),{},{posts:n});case f:return Object(l.a)(Object(l.a)({},e),{},{posts:C(e,t.payload)});case v:case g:return Object(l.a)(Object(l.a)({},e),{},{post:t.payload});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(l.a)(Object(l.a)({},e),{},{selectedPost:t.payload.content,type:t.payload.type,openModal:!0});case x:return Object(l.a)(Object(l.a)({},e),{},{selectedPost:{},type:"create",openModal:!1});default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(l.a)(Object(l.a)({},e),{},{title:t.payload.title,content:t.payload.content});default:return e}}}),L="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,A=Object(i.e)(T,L(Object(i.a)(u.a))),I=n(19),D=n(5),M=n(11),z=n.n(M),G=n(18),J=n(10),R=n.n(J),U="https://mern-anonitalks.herokuapp.com/api",B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(U,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(U,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},q=function(){return{type:p}},X=function(e){return{type:j,payload:e}},H=function(){return{type:d}},V=n(32),K=function(e){var t=e.isAuthenticated,n=e.component,r=Object(V.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(D.b,Object(l.a)(Object(l.a)({},r),{},{component:function(e){return t?Object(a.jsx)(D.a,{to:"/"}):Object(a.jsx)(n,Object(l.a)({},e))}}))},Q=function(e){var t=e.isAuthenticated,n=e.component,r=Object(V.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(D.b,Object(l.a)(Object(l.a)({},r),{},{component:function(e){return t?Object(a.jsx)(n,Object(l.a)({},e)):Object(a.jsx)(D.a,{to:"/login"})}}))},W=n(9),Y=n(16),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(W.a)(t,2),a=n[0],c=n[1],o=function(){c(e)},s=function(e){var t=e.target;c(Object(l.a)(Object(l.a)({},a),{},Object(Y.a)({},t.name,t.value)))};return[a,s,o]},$=function(){var e=Object(s.b)();return Object(a.jsxs)("div",{className:"container-nav",children:[Object(a.jsxs)("li",{className:"nav-list",children:[Object(a.jsx)("ul",{children:"Home"}),Object(a.jsx)("ul",{children:"Chat"}),Object(a.jsx)("ul",{children:"Sobre la p\xe1gina"}),Object(a.jsx)("ul",{children:"Otros"})]}),Object(a.jsx)("button",{type:"button",onClick:function(){e((function(e){localStorage.clear(),e(H())}))},children:"Logout"})]})},ee=function(e){var t=e.type,n=void 0===t?"create":t,a=e.content;return{type:h,payload:{type:n,content:void 0===a?{title:"",content:""}:a}}},te=function(){return{type:x}},ne=function(){return function(){var e=Object(G.a)(z.a.mark((function e(t){var n,a,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("posts");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=a.posts,e.abrupt("return",t({type:b,payload:r}));case 11:e.prev=11,e.t0=e.catch(0),R.a.fire("Error",e.t0,"error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ae=function(e){var t=e.user,n=e.title,r=e.content,c=e.id,o=Object(s.b)();return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{type:"button",onClick:function(){o(function(e){return function(){var t=Object(G.a)(z.a.mark((function t(n){var a,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F("posts/".concat(e),{},"DELETE");case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).ok?(n({type:O,payload:e}),R.a.fire("Listo!","Post Borrado!","success"),n(ne())):R.a.fire("Error",r.msg,"error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),R.a.fire("Error",t.t0,"error");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(c))},children:"Eliminar"}),Object(a.jsx)("button",{type:"button",onClick:function(){o(ee({type:"update",content:{id:c,title:n,content:r}}))},children:"Actualizar"}),Object(a.jsx)("h3",{children:t}),Object(a.jsx)("span",{children:n}),Object(a.jsx)("p",{children:r})]})};ae.defaultProps={user:"User",title:"Title",content:"content"};var re=n(39),ce=n.n(re),oe=n(47),se=n.n(oe),ie=n(91),ue=function(e){var t=e.title,n=e.content,c=e.id,o=void 0===c?"":c,i=e.type,u=Object(s.b)(),p=Object(r.useState)({title:"",content:"",id:""}),j=Object(W.a)(p,2),d=j[0],b=j[1];Object(r.useEffect)((function(){b(Object(l.a)(Object(l.a)({},d),{},{title:t,content:n,id:o}))}),[]);var O=function(e){var t=e.target;b(Object(l.a)(Object(l.a)({},d),{},Object(Y.a)({},t.name,t.value)))},h=function(e){e.preventDefault(),"create"===i?u(function(e){var t=e.title,n=e.content;return function(){var e=Object(G.a)(z.a.mark((function e(a){var r,c,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("posts",{title:t,content:n},"POST");case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,o=c.post,c.ok?(a({type:m,payload:o}),R.a.fire("Listo!","Post Agregado!","success"),a(te()),a(ne())):(R.a.fire("Error",c.errors.title.msg,"error"),R.a.fire("Error",c.errors.content.msg,"error")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),R.a.fire("Error",e.t0,"error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(d)):"update"===i&&u(function(e){var t=e.title,n=e.content,a=e.id;return function(){var e=Object(G.a)(z.a.mark((function e(r){var c,o,s;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("posts/".concat(a),{title:t,content:n,id:a},"PUT");case 3:return c=e.sent,e.next=6,c.json();case 6:o=e.sent,s={title:t,content:n,id:a},o.ok?(r({type:f,payload:s}),R.a.fire("Listo!","Post Actualizado!","success"),r(te()),r(ne())):R.a.fire("Error",o.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),R.a.fire("Error",e.t0,"error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(d))};return Object(a.jsxs)("form",{onSubmit:function(e){return h(e)},className:"container",children:[Object(a.jsx)("input",{className:"inTitle",placeholder:"T\xedtulo del post",type:"text",name:"title",autoComplete:"off",value:d.title,onChange:function(e){return O(e)}}),Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{type:"text",className:"text-content",placeholder:"Escribe tu post aqui.",name:"content",autoComplete:"off",value:d.content,onChange:function(e){return O(e)}}),Object(a.jsx)("input",{type:"submit",className:"mgy center pointer",value:"create"===i?"Postear":"Actualizar"})]})};ce.a.setAppElement("#root");var le=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.modal})),n=t.openModal,r=t.type,c=t.selectedPost,o=function(){return e(te())};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(ce.a,{isOpen:n,onRequestClose:o,closeTimeoutMS:200,className:"modal text-right",overlayClassName:"modal-fondo",children:[Object(a.jsx)(ie.a,{"aria-label":"delete",onClick:o,children:Object(a.jsx)(se.a,{fontSize:"small"})}),"create"===r?Object(a.jsx)(ue,{title:c.title,content:c.content,type:"create"}):Object(a.jsx)(ue,{title:c.title,content:c.content,id:c.id,type:"update"})]})})},pe=[{layout:"inicio-sesion",hasLogged:!1,routes:[{exact:!0,path:"/login",component:function(){var e=Object(s.b)(),t=Z({lemail:"jorge@gmail.com",lpassword:"123456"}),n=Object(W.a)(t,2),r=n[0],c=n[1],o=r.lemail,i=r.lpassword;return Object(a.jsx)("div",{className:"container-home",children:Object(a.jsxs)("div",{className:"container-title-form",children:[Object(a.jsx)("img",{className:"title-anonitalks",src:"https://res.cloudinary.com/initial-cloud/image/upload/c_scale,h_48,w_225/v1604950450/anonitalks_ro0daj.jpg",alt:""}),Object(a.jsxs)("form",{className:"form-home",onSubmit:function(t){var n,a;t.preventDefault(),e((n=o,a=i,function(){var e=Object(G.a)(z.a.mark((function e(t){var r,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("auth",{email:n,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:c.uid,name:c.name}))):R.a.fire("Error",c.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("h2",{className:"title-login",children:"Login"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{className:"input-name",type:"text",placeholder:"Email",name:"lemail",autoComplete:"off",value:o,onChange:c}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{className:"input-password",type:"password",placeholder:"Password",name:"lpassword",autoComplete:"off",value:i,onChange:c}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{className:"login-button",type:"submit",value:"Entrar"}),Object(a.jsx)("br",{}),Object(a.jsx)(I.b,{to:"/signup",children:"Sign up"})]})]})})}},{exact:!0,path:"/signup",component:function(){var e=Object(s.b)(),t=Z({rname:"jorge",remail:"jorge@gmail.com",rpassword1:"123456",rpassword2:"123456"}),n=Object(W.a)(t,2),r=n[0],c=n[1],o=r.rname,i=r.remail,u=r.rpassword1,l=r.rpassword2;return Object(a.jsx)("div",{className:"container-home",children:Object(a.jsxs)("div",{className:"container-title-form",children:[Object(a.jsx)("img",{className:"title-anonitalks",src:"https://res.cloudinary.com/initial-cloud/image/upload/c_scale,h_48,w_225/v1604950450/anonitalks_ro0daj.jpg",alt:""}),Object(a.jsxs)("form",{className:"form-home",onSubmit:function(t){if(t.preventDefault(),u!==l)return R.a.fire("Error","Las contrase\xf1as deben ser iguales","error");var n,a,r;e((n=o,a=i,r=u,function(){var e=Object(G.a)(z.a.mark((function e(t){var c,o;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("auth/new",{name:n,email:a,password:r},"POST");case 2:return c=e.sent,e.next=5,c.json();case 5:(o=e.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:o.uid,name:o.name}))):R.a.fire("Error",o.msg,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("h2",{className:"title-login",children:"Register"}),Object(a.jsx)("input",{type:"text",placeholder:"Name",name:"rname",className:"",autoComplete:"off",value:o,onChange:c}),Object(a.jsx)("input",{type:"text",placeholder:"Email",name:"remail",className:"",autoComplete:"off",value:i,onChange:c}),Object(a.jsx)("input",{type:"password",placeholder:"Password",name:"rpassword1",className:"",autoComplete:"off",value:u,onChange:c}),Object(a.jsx)("input",{type:"password",placeholder:"Confirm password",name:"rpassword2",className:"",autoComplete:"off",value:l,onChange:c}),Object(a.jsx)("input",{type:"submit",className:"login-button",value:"Register"}),Object(a.jsx)(I.b,{className:"mt-2",to:"/login",children:"Back to Login"})]})]})})}}]},{layout:"app",hasLogged:!0,routes:[{exact:!0,path:"/",component:function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.posts})).posts;Object(r.useEffect)((function(){e(ne())}),[e]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("header",{children:[Object(a.jsx)("img",{className:"title-anonitalks-home",src:"https://res.cloudinary.com/initial-cloud/image/upload/c_scale,h_48,w_225/v1604950450/anonitalks_ro0daj.jpg",alt:""}),Object(a.jsx)($,{})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("button",{onClick:function(){return e(ee({}))},children:"Agregar post"}),Object(a.jsx)("center",{children:t.map((function(e){return Object(a.jsx)(ae,Object(l.a)(Object(l.a)({},e),{},{user:e.user.name}),e.id)}))}),Object(a.jsx)(le,{})]})}}]}],je=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,c=t.uid;return Object(r.useEffect)((function(){e(function(){var e=Object(G.a)(z.a.mark((function e(t){var n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(X({uid:a.uid,name:a.name}))):t(q());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(a.jsx)("h5",{children:"Espere..."}):Object(a.jsx)(I.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(D.d,{children:[pe.map((function(e){var t=e.hasLogged?Q:K;return e.routes.map((function(e){return Object(a.jsx)(t,{path:e.path,exact:e.exact,isAuthenticated:!!c,component:e.component},e.path)}))})),Object(a.jsx)(D.a,{to:"/login"})]})})})},de=(n(73),function(){return Object(a.jsx)(s.a,{store:A,children:Object(a.jsx)(je,{})})});o.a.render(Object(a.jsx)(de,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.885662eb.chunk.js.map